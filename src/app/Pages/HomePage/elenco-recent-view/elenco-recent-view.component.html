<ion-item class="gradient-bg diagonal-sides">
  <ion-card-title class="titleView">
    {{ 'Recently Viewed' | translate }}
  </ion-card-title>
</ion-item>

  <div class="card-containerHomePage" #widgetsContent>
    <div class="card-wrapperHomePage" *ngIf="!isLoading">

      <ion-item lines="none" class="item-recentView" style="margin-top: 10px;" *ngFor="let attivita of elencoAtt" (click)="VisualizzaAttivita(attivita)">
          <!-- Avatar -->
          <div slot="start" class="img-recentView">
            <img [src]="attivita.uploadImgPrincipale" alt="" style="width: 100%; height: 100%; object-fit: cover;" />
          </div>
        
          <!-- Testi + stelle + distanza -->
          <ion-label class="title-recentView">
            <!-- Nome -->
            <div style="margin-bottom: 5px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">{{ attivita.nome }}</div>
          
            <!-- Stelle -->
            <div style="display: flex; align-items: center; flex-wrap: wrap; font-size: 14px; margin-bottom: 4px;">
              <ng-container *ngFor="let star of [1, 2, 3, 4, 5]">
                <ion-icon
                  [name]="attivita.rating >= star ? 'star' : attivita.rating >= star - 0.5 ? 'star-half' : 'star-outline'"
                  class="star" style="font-size: 14px; color: #f0c330;">
                </ion-icon>
              </ng-container>
              <span class="rating-countHomePage" style="margin-left: 5px;"> ({{ attivita.numberOfRating }})</span>
            </div>
          </ion-label>
        </ion-item>
    </div>

    <div class="card-wrapperHomePage" *ngIf="isLoading">
      <ion-item lines="none" class="item-recentViewSkeleton">
       <!-- Skeleton avatar -->
       <div slot="start" class="img-recentViewSkeleton">
         <ion-skeleton-text [animated]="true" style="width: 100%; height: 100%;"></ion-skeleton-text>
       </div>
     
       <!-- Skeleton testo e stelle -->
       <ion-label class="title-recentView">
         <!-- Titolo -->
         <ion-skeleton-text [animated]="true" style="width: 70%; height: 16px; margin-bottom: 8px; border-radius: 10px;"></ion-skeleton-text>

         <!-- Stelle -->
         <div style="display: flex; align-items: center; gap: 3px;">
           <ng-container *ngFor="let _ of [1,2,3,4,5]">
             <ion-skeleton-text [animated]="true" style="width: 14px; height: 14px; border-radius: 50%;"></ion-skeleton-text>
           </ng-container>
           <ion-skeleton-text [animated]="true" style="width: 30px; height: 14px; border-radius: 8px;"></ion-skeleton-text>
         </div>
       </ion-label>
     </ion-item>
   
     <ion-item lines="none" class="item-recentViewSkeleton">
       <!-- Skeleton avatar -->
       <div slot="start" class="img-recentViewSkeleton">
         <ion-skeleton-text [animated]="true" style="width: 100%; height: 100%;"></ion-skeleton-text>
       </div>
     
       <!-- Skeleton testo e stelle -->
       <ion-label class="title-recentView">
         <!-- Titolo -->
         <ion-skeleton-text [animated]="true" style="width: 70%; height: 16px; margin-bottom: 8px; border-radius: 10px"></ion-skeleton-text>

         <!-- Stelle -->
         <div style="display: flex; align-items: center; gap: 3px;">
           <ng-container *ngFor="let _ of [1,2,3,4,5]">
             <ion-skeleton-text [animated]="true" style="width: 14px; height: 14px; border-radius: 50%;"></ion-skeleton-text>
           </ng-container>
           <ion-skeleton-text [animated]="true" style="width: 30px; height: 14px; border-radius: 8px;"></ion-skeleton-text>
         </div>
       </ion-label>
     </ion-item>
    </div>
  </div>
